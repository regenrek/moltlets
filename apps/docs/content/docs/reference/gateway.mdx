---
title: Gateway
description: Gateway behavior and ports.
---

Clawlets runs **one OpenClaw Gateway per gateway instance (bot)** to keep state and credentials isolated.
This gives each gateway its own user, workspace, and network ports.

## Why

If a bot user is compromised, it should not be able to read or write another bot's
state or workspace. Isolation also reduces the blast radius for credentials, sessions,
tools, and config.

## Per-gateway invariants (required)

For each gateway `maren`:

- system user: `gateway-maren`
- state dir: `/srv/openclaw/maren` (`OPENCLAW_STATE_DIR`)
- config path: `/run/secrets/rendered/openclaw-maren.json` (`OPENCLAW_CONFIG_PATH`)
- workspace: `/srv/openclaw/maren/workspace` (`agents.defaults.workspace`)
- base port: `gateway.port` (derived ports must not collide)
- gateway mode: `gateway.mode = "local"`
- auth: `gateway.auth` is always enabled (even on loopback)

## Ports

Default port base is `18789`, stride `120`.

Reason: openclaw uses derived ports (bridge/browser/canvas). Spacing avoids collisions across gateways.

Override per gateway:

```bash
clawlets config set --path fleet.gateways.maren.profile.gatewayPort --value 18809
```

## Gateway auth token

Loopback gateways should not run unauthenticated because any local process could call
`config.apply`. Clawlets-template enforces token auth and wires the token per bot.

Clawlets-template enforces:

- `gateway.auth.mode = "token"`
- `gateway.auth.token = "${OPENCLAW_GATEWAY_TOKEN}"`

Token source (per bot):

- `/srv/openclaw/<bot>/credentials/gateway.env`

Generated automatically by:

- `openclaw-gateway-token-<bot>.service` (oneshot)
