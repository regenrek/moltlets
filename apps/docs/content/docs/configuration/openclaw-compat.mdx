---
title: OpenClaw compatibility
description: How Clawlets aligns with OpenClaw config.
---

Clawlets runs **OpenClaw** on servers.

It does not try to maintain a parallel, competing configuration model. Instead:

- you configure the common parts of OpenClaw via **typed surfaces**
- you can still pass through advanced OpenClaw keys when you need to
- Clawlets enforces a small set of invariants so the runtime stays consistent

If you are new to the split, start with [Typed config surfaces](/configuration/typed-surfaces).

## Where the OpenClaw config lives

In `fleet/clawlets.json`, OpenClaw config is composed per bot *inside a host*:

```json
{
  "hosts": {
    "<host>": {
      "bots": {
        "<botId>": {
          "channels": {},
          "agents": {},
          "hooks": {},
          "skills": {},
          "plugins": {},
          "openclaw": {
            "...": "raw OpenClaw config"
          }
        }
      }
    }
  }
}
```

At deploy time, Nix renders the final, merged OpenClaw config to:

- `/run/secrets/rendered/openclaw-<botId>.json`

## Invariants Clawlets enforces

Clawlets overrides a few keys for consistency and operational constraints. These are
the values that tie the runtime to the host layout and gateway policy:

- `gateway.mode = "local"`
- `gateway.bind` / `gateway.port`
- `gateway.auth` (always enabled)
- `agents.defaults.workspace`
- `agents.defaults.skipBootstrap`

The rest of the OpenClaw config is preserved as-is.

## Schema source (pinned vs live)

Clawlets ships a **pinned** OpenClaw schema snapshot for validation and editor tooling.
It is generated from the pinned `openclaw-src` revision so validation stays stable
across installs and deploys.

Source of truth:
- `packages/core/src/assets/clawdbot-config.schema.json` (generated; name kept for compatibility)
- generator: `scripts/generate-openclaw-assets.ts` (reads the pinned `openclaw-src` rev from `flake.lock`)

This snapshot is used to **validate the effective OpenClaw config** for each bot:

- CLI: `clawlets config validate --host <host>`
- Dashboard: Advanced OpenClaw editor (schema diagnostics + save-time validation)

<Callout type="info" title="Offline by default">
Validation uses the committed schema snapshot. It does not fetch anything from the
network during normal config validation or deploy.
</Callout>

Live schema (optional):

- CLI: `clawlets openclaw schema fetch --host <host> --gateway <gatewayId>` (fetches via gateway RPC over SSH)
- Dashboard: "Use live schema" (fetches from a running bot)

The UI surfaces drift between:

- Pinned schema vs the project's pinned `nix-openclaw` rev
- Pinned schema vs upstream `nix-openclaw` main

## Updating the pinned schema snapshot (contributors)

If you bump the OpenClaw pin, regenerate the schema snapshot and commit it.

1) Ensure `nix-openclaw` and `openclaw-src` are aligned (see `nix flake check` â†’ `openclaw-pin-align`).
2) Regenerate the snapshot:

```bash
pnpm clawlets:openclaw-assets -- --src /path/to/openclaw
```

The generator fails fast if the `--src` revision does not match the pinned rev from
`flake.lock`.

## Upgrade guidance

When upgrading OpenClaw (via `nix-openclaw`):

1. Update the project flake input
2. Run `clawlets doctor` to catch schema drift
3. Apply updates to a staging host first
