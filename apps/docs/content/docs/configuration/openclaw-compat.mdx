---
title: OpenClaw compatibility
description: How Clawlets aligns with OpenClaw config.
---

Clawlets runs **OpenClaw** on servers.

It does not try to maintain a parallel, competing configuration model. Instead:

- you configure the common parts of OpenClaw via **typed surfaces**
- you can still pass through advanced OpenClaw keys when you need to
- Clawlets enforces a small set of invariants so the runtime stays consistent

If you are new to the split, start with [Typed config surfaces](/configuration/typed-surfaces).

## Where the OpenClaw config lives

In `fleet/clawlets.json`, OpenClaw config is composed per bot *inside a host*:

```json
{
  "hosts": {
    "<host>": {
      "bots": {
        "<botId>": {
          "channels": {},
          "agents": {},
          "hooks": {},
          "skills": {},
          "plugins": {},
          "openclaw": {
            "...": "raw OpenClaw config"
          }
        }
      }
    }
  }
}
```

At deploy time, Nix renders the final, merged OpenClaw config to:

- `/run/secrets/rendered/openclaw-<botId>.json`

## Invariants Clawlets enforces

Clawlets overrides a few keys for consistency and operational constraints. These are
the values that tie the runtime to the host layout and gateway policy:

- `gateway.mode = "local"`
- `gateway.bind` / `gateway.port`
- `gateway.auth` (always enabled)
- `agents.defaults.workspace`
- `agents.defaults.skipBootstrap`

The rest of the OpenClaw config is preserved as-is.

## Schema source (pinned vs live)

Clawlets ships a pinned OpenClaw schema for validation and editor tooling.
The schema is generated from a pinned OpenClaw source revision so validation stays
stable across installs and deploys.

Source of truth:
- `packages/core/src/assets/clawdbot-config.schema.json` (generated; name kept for compatibility)
- generator: `scripts/generate-openclaw-assets.ts` (reads the pinned `openclaw-src` rev from `flake.lock`)

- CLI: `clawlets openclaw schema fetch --host <host> --gateway <gatewayId>` to fetch live schema
- UI: "Use live schema" toggles to a gateway-fetched schema

The UI surfaces drift between:

- Pinned schema vs the project's pinned `nix-openclaw` rev
- Pinned schema vs upstream `nix-openclaw` main

## Upgrade guidance

When upgrading OpenClaw (via `nix-openclaw`):

1. Update the project flake input
2. Run `clawlets doctor` to catch schema drift
3. Apply updates to a staging host first
