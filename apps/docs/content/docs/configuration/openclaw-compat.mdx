---
title: OpenClaw compatibility
description: How Clawlets aligns with OpenClaw config.
---

Clawlets runs **OpenClaw** on servers.

It does not try to maintain a parallel, competing configuration model. Instead:

- you configure the common parts of OpenClaw via **typed surfaces**
- you can still pass through advanced OpenClaw keys when you need to
- Clawlets enforces a small set of invariants so the runtime stays consistent

If you are new to the split, start with [Typed config surfaces](/configuration/typed-surfaces).

## Where the OpenClaw config lives

In `fleet/clawlets.json`, OpenClaw config is composed per gateway *inside a host*:

```json
{
  "hosts": {
    "<host>": {
      "gatewaysOrder": ["<gatewayId>"],
      "gateways": {
        "<gatewayId>": {
          "channels": {},
          "agents": {},
          "hooks": {},
          "skills": {},
          "plugins": {},
          "openclaw": {
            "...": "raw OpenClaw config"
          }
        }
      }
    }
  }
}
```

At deploy time, Nix renders the final, merged OpenClaw config to:

- `/run/secrets/rendered/openclaw-<gatewayId>.json`

## Invariants Clawlets enforces

Clawlets overrides a few keys for consistency and operational constraints. These are
the values that tie the runtime to the host layout and gateway policy:

- `gateway.mode = "local"`
- `gateway.bind` / `gateway.port`
- `gateway.auth` (always enabled)
- `agents.defaults.workspace`
- `agents.defaults.skipBootstrap`

The rest of the OpenClaw config is preserved as-is.

## Schema source (pinned vs live)

Clawlets ships a **pinned OpenClaw schema snapshot** for validation and editor tooling.
The snapshot is generated from the pinned `openclaw-src` revision so validation stays
stable across installs and deploys.

Source of truth:
- `packages/core/src/generated/openclaw-config.schema.json` (generated)
- `packages/core/src/generated/openclaw-config.types.ts` (generated TS types)
- generator: `packages/core/scripts/sync-openclaw-schema.ts`

Recommended update flow (contributors):

```bash
nix run .#update-openclaw-schema
```

CI gate:

- `nix flake check` includes `openclaw-schema-up-to-date` (fails if the snapshot is stale)

Live schema (optional, for drift debugging):

- CLI: `clawlets openclaw schema fetch --host <host> --gateway <gatewayId>` (fetch via gateway RPC over SSH)
- Dashboard: "Use live schema" (fetch from a running bot)

The UI surfaces drift between:

- Pinned schema vs the project's pinned `nix-openclaw` rev
- Pinned schema vs upstream `nix-openclaw` main

## Upgrade guidance

When upgrading OpenClaw (via `nix-openclaw`):

1. Update the project flake input
2. Run `clawlets doctor` to catch schema drift
3. Apply updates to a staging host first
