---
title: Deploy credentials
description: Manage local deploy creds with sealed runner input.
---

Deploy credentials are local-only operator tokens in `.clawlets/env`. They are used by
bootstrap, infra commands, and doctor checks. They are not stored in Convex as secret
values.

UI route: `/<projectSlug>/security/api-keys`

## Keys managed in the UI

- `HCLOUD_TOKEN` (Hetzner, recommended path)
- `GITHUB_TOKEN` (required for Setup remote deploy; also required for private base repos)
- `SOPS_AGE_KEY_FILE`

## Recommended flow

<Steps>
  <Step>
    Open Project credentials at <code>/$projectSlug/security/api-keys</code>.
  </Step>
  <Step>
    Click <strong>Find</strong> to detect an existing operator age key, or <strong>Generate</strong> to create one.
  </Step>
  <Step>
    Fill required setup creds: <code>HCLOUD_TOKEN</code>, <code>GITHUB_TOKEN</code>, and{" "}
    <code>SOPS_AGE_KEY_FILE</code>.
  </Step>
  <Step>
    Click <strong>Save</strong>.
  </Step>
  <Step>
    Reopen Setup and confirm <code>Provider Tokens</code> step is unlocked/completed.
  </Step>
</Steps>

Get Hetzner API token:
[Hetzner token setup](/dashboard/hetzner-token)

Get GitHub token:
[GitHub token setup](/dashboard/github-token)

Set SOPS age key:
[SOPS age key setup](/dashboard/sops-age-key)

## Browser to runner sealed-input path

When you click Save, the dashboard uses a reserve+finalize flow:

1. Select a target runner (required when multiple sealed-capable runners are online).
2. Reserve a job targeted to that one online sealed-capable runner.
3. Encrypt deploy-cred JSON in the browser with the selected runner public key.
4. Finalize enqueue with ciphertext only.

Transport invariants:

- Control plane stores ciphertext only (`sealedInputB64`).
- Runner decrypts with its private key at execution time.
- Runner never prompts and never waits for out-of-band secret submit.
- AAD binds ciphertext to `projectId:jobId:kind:targetRunnerId`.

For runner capability details: [Runner Agent](/operations/runner-agent).

## What Convex stores for this flow

Convex stores coordination metadata for deploy-credentials operations:

- runner/job metadata (target runner, run/job ids, status)
- sealed input envelope metadata for queued sealed jobs
- audit metadata (`updatedKeys`, `targetRunnerId`, run references)

In setup flow, Convex also stores draft sealed-section metadata:

- `alg`, `keyId`, `targetRunnerId`, `aad`, `sealedInputB64`, `updatedAt`, `expiresAt`

In setup flow, Convex returns section read status (`set` or `missing`).

Convex does not store plaintext `.clawlets/env` credential values.

## Setup flow behavior

In host Setup, credential saves are draft writes:

- Intermediate setup step saves do not enqueue runner jobs.
- Values are sealed in browser and stored as write-only setup draft sections.
- Final deploy triggers one sealed `setup_apply` job that applies all gathered setup inputs in one pass.
- Setup readiness uses draft section status from Convex. It does not auto-read existing local
  `.clawlets/env` values for step completion.

## Verify

- In UI, saved keys show status `set`.
- Setup `Provider Tokens` step marks complete.
- Optional CLI check via runner:

```bash
clawlets env show --json
```

## Troubleshooting

### "Unable to read deploy creds status. Check runner."

- Runner offline, unreachable, or not paired with project.
- Start/restart runner and re-open the page.

### "No online runner advertises sealed input"

- Runner version is old or heartbeat capabilities are incomplete.
- Restart with latest CLI and confirm runner heartbeat reports sealed-input capability.

### "Select a sealed-capable runner"

- Multiple runners are online and no target runner is selected in the UI.
- Pick one runner in the **Target runner** selector and save again.

### Credentials still unset in Setup

- Confirm required key is set: `HCLOUD_TOKEN`
- Confirm required key is set: `GITHUB_TOKEN`
- Confirm `SOPS_AGE_KEY_FILE` points to a valid operator age key file.

If setup still shows missing after local edits, save the setup credentials section so the
draft status is updated to `set`.
