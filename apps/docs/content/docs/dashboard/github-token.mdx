---
title: GitHub token
description: Create and validate GITHUB_TOKEN for Clawlets setup.
---

Clawlets uses <code>GITHUB_TOKEN</code> during setup to verify access to the repository
where Nix evaluates your project, and to fetch GitHub-hosted flake inputs during
bootstrap/update runs.

You can think in two roles:

- **Project repo**: created by <code>clawlets project init</code> or by importing an existing
  GitHub repo. It contains <code>fleet/clawlets.json</code>, <code>flake.nix</code>, and
  <code>secrets/</code>.
- **Evaluation repo**: the repo Nix uses as the flake evaluation source. Usually this is the
  project repo <code>origin</code> remote, unless you set <code>baseFlake</code> to a different
  GitHub repo.

Dashboard project creation only creates the local project folder and git repo. It does not
create a remote GitHub repo for you. If you want remote/CI flow, create a private GitHub repo,
add it as <code>origin</code>, and push manually.

If the evaluation repo is private, Setup <code>Provider Tokens</code> stays blocked until the
token can authenticate.

That token lets the runner:

- verify GitHub API visibility for your evaluation repo, and
- pass a GitHub access token to Nix when it evaluates/pulls <code>github:</code> flake inputs.

Even on a public repo this token is used to keep one credential model across setup and
avoids runtime surprises. For private repos, it is required.

Which repository is it checking?

`GITHUB_TOKEN` is checked against the evaluation repo in this order:

- `fleet/clawlets.json` field <code>baseFlake</code> when set (for example <code>github:owner/repo</code>)
- the project repo's <code>origin</code> remote when <code>baseFlake</code> is empty

Does Clawlets ever change <code>baseFlake</code>?

No. The runner only reads `baseFlake`; it does not rewrite it during setup or bootstrap.
You change it only by editing <code>fleet/clawlets.json</code> or with
`clawlets config set baseFlake ...`.

For projects created by <code>clawlets project init</code>, this is usually the same repository
that keeps <code>fleet/clawlets.json</code> and <code>secrets/</code>.

Quick checks:

```bash
cat fleet/clawlets.json | sed -n '1,120p'  # check baseFlake
git remote get-url origin                  # check origin
```

Use this page as the canonical operator flow for creating the token and saving it in the dashboard.

## Prereqs

- GitHub account with read access to your evaluation repo.
- Evaluation source is in <code>fleet/clawlets.json</code> field <code>baseFlake</code>; fallback is project repo <code>origin</code>.
- Project setup route open in dashboard: <code>/$projectSlug/hosts/$host/setup?step=creds</code>.
- Preferred: a fine-grained personal access token (PAT).

## Create token (recommended: fine-grained PAT)

<Steps>
  <Step>
    Open GitHub token settings:
    <br />
    https://github.com/settings/personal-access-tokens/new
  </Step>
  <Step>
    Set a clear token name (example: <code>clawlets-setup</code>) and a reasonable expiration.
  </Step>
  <Step>
    Under <strong>Resource owner</strong>, select the owner that contains your evaluation repo.
    If the repo is in an org, pick that org (not your personal account).
  </Step>
  <Step>
    Under <strong>Repository access</strong>, select <strong>Only select repositories</strong>.
    Then under <strong>Selected repositories</strong>, select exactly the evaluation repo Clawlets reads.
  </Step>
  <Step>
    Under <strong>Permissions</strong>, set exactly:
    <br />
    <code>Repository permissions → Contents: Read-only</code>
    <br />
    <code>Repository permissions → Metadata: Read-only</code> (if shown; GitHub may auto-set this)
    <br />
    Leave all other repository, organization, and account permissions at <strong>No access</strong>.
  </Step>
  <Step>
    Create the token and copy it immediately (GitHub shows it once).
  </Step>
</Steps>

For Clawlets setup/deploy, no write permission is needed on GitHub for this token.

If your organization policy blocks fine-grained PATs, use a classic PAT as fallback and grant only what your repository access requires.

## Save token in Clawlets

<Steps>
  <Step>
    Open <code>/$projectSlug/security/api-keys</code>.
  </Step>
  <Step>
    Set <code>GITHUB_TOKEN</code> and save.
  </Step>
  <Step>
    Return to Setup and confirm <code>Provider Tokens</code> is complete.
  </Step>
</Steps>

Related: [Deploy credentials](/dashboard/deploy-credentials)

## Verify

- Setup <code>Provider Tokens</code> no longer blocks on <code>GITHUB_TOKEN</code>.
- Optional CLI check:

```bash
clawlets env show --json
```

## Troubleshooting

### `Evaluation repo appears private (404). Set GITHUB_TOKEN in your environment and retry.`

- Token is missing, expired, or lacks access to the evaluation repo.
- Reissue token and confirm repository access includes that repo.

### `GITHUB_TOKEN rejected by GitHub (401).`

- Token value is invalid/revoked, or copied with trailing whitespace.
- Regenerate token and paste again.

### Setup still says token missing

- Reopen <code>/$projectSlug/security/api-keys</code> and verify <code>GITHUB_TOKEN</code> is marked as set.
- Save again, then refresh Setup.
