---
title: Runtime layout
description: On-host paths and state.
---

This page summarizes the on-host directory layout for gateways, orchestrator, and cattle.
Use it when debugging file permissions, tracing secrets, or verifying where state is
written.

## Pet host (fleet gateways)

- `/srv/openclaw/<gatewayId>/` (default; see `services.openclawFleet.stateDirBase`)

Per-gateway:

- `/srv/openclaw/<gatewayId>/workspace/`: agent workspace (seeded once if `documentsDir`/`workspace.seedDir` set)
- `/srv/openclaw/<gatewayId>/credentials/`: generated runtime creds (e.g. GitHub App token env, git-credentials)
- `/srv/openclaw/<gatewayId>/.codex/`: Codex CLI OAuth state (if Codex is enabled and you run device auth)

Host-wide secrets/tools:

- `/var/lib/sops-nix/key.txt`: host age key (installed via `nixos-anywhere --extra-files`)
- `/var/lib/clawlets/secrets/hosts/<host>/<secret>.yaml`: encrypted secrets (sops, out-of-store)
- `/run/secrets/**`: decrypted/rendered secrets (activation-time, tmpfs)
- `/etc/clawlets/tools.md`: generated inventory of installed tools (read-only)

## Pet host (`clf-orchestrator`)

The orchestrator runs as a separate service and keeps its queue state under `/var`.

- socket dir: `/run/clf/`
- API socket: `/run/clf/orchestrator.sock` (systemd socket `0660`, group `clf-gateways`)
- state dir: `/var/lib/clf/orchestrator/`
- DB: `/var/lib/clf/orchestrator/state.sqlite` (SQLite WAL; contains job payloads/results + token hashes)
- cattle personas snapshot: `/etc/clf/cattle-personas/<name>/{SOUL.md,config.json}` (read-only)
- admin SSH keys (cattle debug): `/etc/clf/admin_authorized_keys` (read-only)

## Cattle VM (ephemeral)

Ephemeral cattle instances have their own layout. Inputs are injected on disk; short-
lived runtime files live on tmpfs.

- injected (disk):
  - task: `/var/lib/clawlets/cattle/task.json`
  - persona: `/var/lib/clawlets/cattle/persona/{SOUL.md,config.json}`
- runtime (tmpfs):
  - bootstrap token: `/run/clawlets/cattle/bootstrap.json` (deleted after first use)
  - env overrides (public): `/run/clawlets/cattle/env.public` (JSON)
  - secrets env: `/run/clawlets/cattle/env` (deleted when `autoShutdown=1`)
- workspace/logs:
  - `/var/lib/clawlets/cattle/workspace/` (gateway log, agent log, state)
  - result: `/var/lib/clawlets/cattle/result.json`

Invariant: gateway processes should not write outside their `/srv/openclaw/<gatewayId>/` state dir (except Nix-managed paths like `/run/secrets/**`).
